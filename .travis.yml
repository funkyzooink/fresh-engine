language: android
git:
  submodules: true
android:
  components:
  - tools
  - platform-tools
  - tools
  - build-tools-28.0.3
  - android-28
before_install:
- openssl aes-256-cbc -K $encrypted_e0e99809c00b_key -iv $encrypted_e0e99809c00b_iv
  -in fz.keystore.enc -out fz.keystore -d
- echo y | sdkmanager "ndk-bundle"
- echo y | sdkmanager "cmake;3.10.2.4988404"
install:
- printenv
- echo `pwd`
- echo $NDK_ROOT
- export PATH=$PATH:$NDK_ROOT
- echo $PATH
- export NDK_ROOT=/usr/local/android-sdk/ndk-bundle
- export PATH=$PATH:$NDK_ROOT
- export ANDROID_SDK_ROOT=/usr/local/android-sdk
- export PATH=$PATH:$ANDROID_SDK_ROOT/tools:$ANDROID_SDK_ROOT/platform-tools
- cd cocos2d
- python download-deps.py --remove-download=yes
- python ./setup.py
- export COCOS_CONSOLE_ROOT=`pwd`/tools/cocos2d-console/bin
- export PATH=$PATH:$COCOS_CONSOLE_ROOT
- export COCOS_TEMPLATES_ROOT=`pwd`/templates
- export PATH=$PATH:$COCOS_TEMPLATES_ROOT
- export ANT_ROOT=/usr/share/ant/bin
- export PATH=$PATH:$ANT_ROOT
- printenv
- cd ..
- python build.py -n examples/little-ninja/
- cocos compile -p android  -j 8 --agreement n
# - python build.py -c
# - python build.py -n examples/the-dragon-kid/
# - cocos compile -p android  -j 8 --agreement n
deploy:
  provider: releases
  skip_cleanup: true
  draft: true
  api_key:
    secure: j+tIAJ//pdtLpzbo88KXydkUZ1sLSHvB3bA9+o2N3fyPVaXYDXhC1z7092F4NOTiH/2P6jCzorF/2xUOee/ugFwAqabqC2Hvf2GjkD+pKVbXIN82jsgfBzQsooHTKYrJ7ZZ4MovZTOYCo9vSisFeUcjfvZC4fl7+ppphOGYY7SFXJ8rXt/PvxJrAOUFa1YUVbtOlE5bg+enhz4uu2mNW3Crteo7qi/5LkgU6zBHpQWdYx3LLq90aL+gwVfOSrfb4klfMIO5FodGJi/YnXHdm2YP0kox7G/N346M3ivFYc2fkdiPmmo3znx2rVvswbfP2Om0enJsU/LnxEcAa/wtfVKShiMUuuOQjHK1ILL50MLNjJarHkKmGa9s/ouUu9KrS6ma1Hxm5C3cmojQjf6jdQNVXKiKR+dADV+2uViV0PV9TGrdo0ejKyIts5DxAkeHihRVYiewi8ANAJnxRRk3ukfrGbDzUJBGudbt6vzHKMAIZETlulA0rgTJOGdN/7+XQxdggXmCq/X1PdI83UbwTLLkRQGAF/R/LHXu7fl3qS5+xujTS2YFlZwudr2iMwgOLjhjIeoi/6M4EKxguJbvIJXOEo5IrA23J5/zQBpKdzCdypTzvewAQQyErQKpXtNcvAKvFsAnYRkcJAWVuaYlOMMgSNmUmRVgsC3LZ/5uLFmU=
  file_glob: true
  file: bin/release/android/*
env:
  global:
  - secure: mymD3dNWUyOERL1Drn3VHrHl7XahKp5f4HgBgX1iQXxLbn9etfhx38r69ArRSZzFsiDgUVeHs0tdEk4GmcSJILaLI07Nu90Wr8EUcBPzQF7DBLrzto7Bgw179Rl+WJEXCetXNUwORr6K6QXGcJZN502XyoQbxt/BtdmaQW1ZSLApQ48HwXQmXQ9gro/KvmldB0RLEQmoG/FSaOzZoTT2I3Ot64xn+5lgaHL2p/QXIMjs4DJvN33eKr6KagC7twnR0ZR/0e1K7O21OBKS7fDDLy1UXJLOEJpoaQoG6Gz53EraDnkrkaMwbOyVDDpwr0QVloZ0KlDKXG8AgD4Ei/az+bTMrkehqUxFqIesqDBSaZleuC6Sfpw/3eMdh5HmDo0/CDwUXrOP5mX4V4Rf5EWFy0P2L4pTCg93/Thhz69PGIGy3Y8DirWN52zwAxIgmr7rU87jtCAQa7uTOrV/c6rymU5cThVYETFxjwinIF4XRqhTVpSDeEQEmqTyoJuMIgX8hy5gI4/GSh2U7Xf+Zd6M3fVik57CNLDbIS2v0ss9Xan4QYpQLSEeurg6x8i10TYKg9Kv9lIpMxhm0brpz3BOC0G6cTe8vuY7rRb5fQVWlM1BanNEm3Tjf7fq14aoYdhbXf86sNMDCGNn4z8qqWoRbDj+cPPRUnQ2EVDU3faitjY=
  - secure: DOlcmt9PbdXWKWgDkH88AM6gXkRUI96h+yhDsJEWy2/4+p1ImgovopDAjTAWciOWEdCG6QEuMN0OmPKHAFBAipQl6y7PZDBW8Q1biqyEqPbqpDlruZta8MPSjsVhGGaTvalh4Pn+Cc2ok3lCMVL+t43NoriEV1tvKqXJEKzLS2uFsxd5izanvbtb0aCwifUZg4Ds8wBep4grv+lBWApkp7neDskLi31SwOQ3miS5wpS97XzVyIBhxrsL1iETaweBsIGvlQTMG9oEjeO42Ng0wVFZaW40dL8JNriRGXKE8XfG9/9rwSwvtNKWRsjW0os4Ka8C4lRsMR3+XPQTFpRlbMIcxpXweQ9VjZODYpe/JjMlFmVOZry7PLLlS6B9Ii08SoAVOqlJORWSqH0KCX4+LOLjSfemk6cAFBWsGAo7C1yTS3GCidSi+2V8i++Gzo822PwzPdZ5WDUh1s2hJkNv+u2xeVLXW5NhkeO4zc4RCO1XRotUdkjGbTVhRZ/Gqw2eDku1CAtUgBZdqE837FakenB5x3Gj100RiWgfTEEvhouqPU3+KzNZTT5nA8YAQLsFbRjmdrivEMdk5jcZ9+qc3uO5g52/zLGnrDdwEWMIZWRI9yleHInIjahcA3bdUeHvB79LtCV4ukd304VFtdt5WuhZO3GelxS2XErGTgbOehQ=
  - secure: XZ5M0CPGB8lUS3TRd127HBo4eH4/rXcPNdSwOKbysD2S38BTWN7CN8VC/gN1HDzmXujsjndtQ+mk9kzfDPugvCPxuWtFsRqSuczZZVlTPnasuhazlOG1sVfLeHnSF6GPCSF+qixdieVEdZugr354IkQ5phgL0sZL8+txI3Hny6/qOYb+uUDdv/ekMi70eM/tewtfXl9pvunPLDKQcQpo5sZx1fNWWzJiWIiXwCJTYxKcorQ/gDo4lHH4voAbkY7tW+9WUjq0xnjDf3UtNXMbmbGkMGnk++k9ZZnVJ4r7sgD6LoYbPpnI3BPW270mFL9uoN5fZ0w0b1rqboXT5pK1zN4Nhqv7WU7BV6hCPTvBmXHzZ9NLesFBnhf2YO+7L3t6d4z/KSsDjFIPDEBzCUX5FqMtfxH/K/MxyN6e4HiPhAu6haMOwrmmRZW/fH3R+9NcsPYoGwVueAQOzgNV1fUoegQXsz7wx8RBMiwFACCz2u1dGwQmtWYx1jOzh/g6nFIT2xIdeu3MVAWYwtyc7Dl6cWK6NefHpqzDvVJGh9g5FOMHZ2RDuh0MxLienfYh48WES8x2Udlyi3o9WbVV5dsnFqTmNjyr+0ffhHxPpZARve9JEngjUMj/ZIJad9+txDIcBzByV4WDo99bK+KqbywWYVB6gXEFGcgHjcyAw0TUaaw=
